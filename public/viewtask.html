<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <script src="https://d.line-scdn.net/liff/1.0/sdk.js"></script> <---- add script here
    
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json">
    <link rel="shortcut icon" href="%PUBLIC_URL%/favicon.ico">

    <title>App</title>
  </head>
  <body onload="initialize()">
  
	<div class="container"></div>
	
	<div class="error"></div>
  
  
  <script> 
  
  initialize() {
	  document.getElementsByClassName('error')[0].appendChild("iniitil")
  	  document.getElementsByClassName('error')[0].appendChild('<br />')
    liff.init((data) => {
    	document.getElementsByClassName('error')[0].appendChild("init")
    	document.getElementsByClassName('error')[0].appendChild('<br />')
	    liff.getProfile(({ userId }) => {
	    	document.getElementsByClassName('error')[0].appendChild(userId)
	    	document.getElementsByClassName('error')[0].appendChild('<br />')
    		fetch(userId)
    	})
	});
  }
  
  fetch(userId) {
  
  
  fetch('https://line-jarturon.herokuapp.com/getTask?userId='+userId)
  .then(function(response) {
    return response.json();
  })
  .then(function(myJson) {
    for (let row of myJson) {
		let node = document.createElement("div");
		node.innerHTML = row['name']
		document.getElementsByClassName('container')[0].appendChild(node)
		document.getElementsByClassName('container')[0].appendChild('<br />')
	}
  }).catch(error => {
	    let node = document.createElement("div");
		node.innerHTML = error
		document.getElementByClassNames('error')[0].appendChild(node)
		document.getElementsByClassName('error')[0].appendChild('<br />')
  });
  
  
  }
  
  
  
  </script>
  
  
  
  </body>
  
  </html>